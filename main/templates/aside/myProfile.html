<div class="m-2 rounded-2" style="border: 2px solid rgb(0, 0, 0);">

    <!-- 프로필 이미지 -->
    <div class="my-2 mx-auto" style="width: 130px; height: 130px; border-radius: 70%; overflow: hidden;">
        <img src="{{ owner.profile_image.url }}" alt="" style="width: 100%; height: 100%; object-fit: cover;">
    </div>

    <!-- ID, 글 작성 버튼 -->
    <div class="d-flex justify-content-between align-items-center px-1" style="width: 100%;">
        <div class="mx-3">
            {{ owner.username }}
        </div>
        {% if user.id == owner.id %}
        <button onclick="location.href='{% url 'main:create' username=request.user.username %}'" type="button" class="btn btn-primary ms-auto me-3" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 0.75rem;">글 작성</button>
        {% endif %}
    </div>

    <!-- 소개 -->
    {% if user.id == owner.id %}
        <div class="p-2 overflow-auto editable-text" style="height: 15rem;">
            <p data-url="{% url 'main:edit_introduce' username %}">
                {{ owner.blog.introduce }}
            </p>
        </div>
    {% else %}
        <div class="p-2 overflow-auto" style="height: 15rem;">
            <p>{{ owner.blog.introduce }}</p>
        </div>
    {% endif %}

    <script>
        $(document).ready(function() {
            // 클릭 이벤트를 감지하여 텍스트 수정
            $(document).on('click', '.editable-text', function() {
                var introduceText = $(this).text().trim();
                var introduceInput = '<textarea class="form-control editing-text" rows="3">' + introduceText + '</textarea>';
                $(this).html(introduceInput).find('textarea').focus().on('keypress', function(event) {
                    if (event.keyCode === 13) {
                        event.preventDefault();
                        var newText = $(this).val().trim();
                        var url = $(this).parent().data('url');
                        $.ajax({
                            type: 'POST',
                            url: url,
                            data: {
                                'csrfmiddlewaretoken': $('[name="csrfmiddlewaretoken"]').val(),
                                'introduce': newText,
                            },
                            success: function(response) {
                                $('.editable-text').text(newText);
                            },
                            error: function(xhr, errmsg, err) {
                                console.error(xhr.status + ': ' + xhr.responseText);
                            }
                        });
                    }
                });
            });
        });
    </script>

</div>