{% for comment in post.comment_set.all %}

    <!-- comment -->
    <div class="d-flex align-items-center" style="width: 100%;">
        {% if comment.user.profile_image %}
            <div class="m-1" style="width: 30px; height: 30px; border-radius: 70%; overflow: hidden;">
                <img src="{{ comment.user.profile_image.url }}" alt="" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
        {% else %}
            <div class="m-1" style="width: 30px; height: 30px; border-radius: 70%; overflow: hidden;">
                <img src="/media/profile/default.jpeg" alt="" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
        {% endif %}
        <div class="mx-2">
            <p class="m-0" style="font-size: 1rem;">{{ comment.user }}</p>
            <p class="m-0" style="font-size: 0.75rem; color: rgb(143, 143, 143);">{{ comment.updated_at }}</p>
        </div>
        <div class="ms-auto my-0 py-0">
            <div class="ms-auto">
                {% if user == comment.user %}
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                        <ul class="dropdown-menu">
                            <li><button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#commentModal{{ post.id }}-{{ comment.id }}">수정하기</button></li>
                            <li><button onclick="commentDelete('{{post.id}},{{comment.id}}');" class="dropdown-item" href="#">삭제하기</button></li>
                        </ul>
                    </div>
                    {% include '_commentmodal.html' %}
                {% else %}
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" type="button" style="visibility: hidden;"></button>
                    </div>
                {% endif %}
            </div>
            <div class="my-0 py-0 me-2">
                {% if user in comment.like_users.all %}
                    <i class="bi bi-heart-fill comment_heart align-self-center " style="color:red; font-size: 1rem;" data-post-id="{{ post.id }}" data-comment-id="{{ comment.id }}" onclick="comment_likeRequest(this, '{{ post.id }}', '{{ comment.id }}')">{{ comment.like_users.all|length }}</i> 
                {% else %}
                    <i class="bi bi-heart comment_heart align-self-center" style="font-size: 1rem;" data-post-id="{{ post.id }}" data-comment-id="{{ comment.id }}" onclick="comment_likeRequest(this, '{{ post.id }}', '{{ comment.id }}')">{{ comment.like_users.all|length }}</i>                
                {% endif %}
            </div>
        </div>
    </div>
    
    <p class="mt-2 ms-1">{{ comment.content }}</p>
    <div class="d-flex align-items-center" style="width: 100%;">
        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="collapse" data-bs-target="#reply-list-{{ post.id }}-{{ comment.id }}" aria-expanded="false" aria-controls="reply" style="--bs-btn-padding-y: 0rem; --bs-btn-padding-x: .3rem; --bs-btn-font-size: .75rem;">답글</button>
    </div>

    <div class="collapse" id="reply-list-{{ post.id }}-{{ comment.id }}">
        {% if user.is_authenticated %}
        <form action="{% url 'posts:reply_create' post_id=post.id comment_id=comment.id %}" method="POST" class="reply-Form">
            {% csrf_token %}
            {{ reply_form }}
            <div class="mt-3 d-flex">
                <input type="submit" class="ms-auto btn btn-secondary" value="답글 작성">
            </div>
        </form>
        {% endif %}
    </div>